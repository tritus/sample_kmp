query HomeScreenOp($accountId: ID!, $carId: ID!) {
  me {
    ...HomeUser
    account(id: $accountId) {
      ...HomeAccount
      car(id: $carId) {
        ...car
      }
    }
  }
  ...HomeStations
}

query HomeScreenOpWithoutCar($accountId: ID!) {
  me {
    ...HomeUser
    account(id: $accountId) {
      ...HomeAccount
    }
  }
  ...HomeStations
}

query HomeScreenFallbackOp {
  me {
    ...HomeUser
  }
  ...HomeStations
}

subscription HomePageSpot {
  spotChanged {
    spot {
      id
      publicAvailability
    }
  }
}

fragment CurrentRemoteCharge on RemoteCharge {
  id
  singleBooking {
    ...SingleBooking
  }
  capacityUsage {
    ...CapacityUsage
  }
  station {
    id
    name
  }
}

fragment CapacityOccurrence on CapacityOccurrence {
  id
  endAt
  startAt
  station {
    id
    name
  }
}

fragment CapacityUsage on CapacityUsage {
  id
  endAt
  startAt
  station {
    id
    name
  }
  canDisplayAccess
  canExit
  canBeFinished
  canBeCanceled
}

fragment HomeAccount on Account {
  id
  fallbackCar {
    ...car
  }
  singleBookings {
    ...SingleBooking
  }
  currentRemoteCharge {
    ...CurrentRemoteCharge
  }
  accountUser {
    firstname
    canCreateCar
    canCreateSingleBooking
    canListCars
    capacityUsages(first: 1) {
      nodes {
        ...CapacityUsage
      }
    }
    capacityOccurrences(first: 1) {
      nodes {
        ...CapacityOccurrence
      }
    }
  }
}

fragment HomeUser on User {
  id
  phoneNumber
  fallbackAccount {
    ...HomeAccount
  }
  invitations(first: 10) {
    nodes {
      id
    }
  }
  accounts {
    nodes {
      id
      label
      pro
      fallbackCar {
        id
      }
    }
  }
}

fragment HomeStations on Query {
  stations(first: 100) {
    nodes {
      ...station
    }
  }
}
